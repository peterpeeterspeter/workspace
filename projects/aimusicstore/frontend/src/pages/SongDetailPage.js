import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useEffect, useState } from 'react';
import { useParams } from 'react-router-dom';
import { getSong } from '../api/client';
export default function SongDetailPage() {
    const { id } = useParams();
    const [song, setSong] = useState(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);
    useEffect(() => {
        async function loadSong() {
            if (!id)
                return;
            try {
                setLoading(true);
                const songData = await getSong(id);
                setSong(songData);
                setLoading(false);
            }
            catch (err) {
                console.error('Failed to load song:', err);
                setError('Song not found');
                setLoading(false);
            }
        }
        loadSong();
    }, [id]);
    if (loading) {
        return (_jsx("div", { className: "min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center", children: _jsx("div", { className: "text-2xl font-bold animate-pulse", children: "Loading song details..." }) }));
    }
    if (error || !song) {
        return (_jsx("div", { className: "min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center", children: _jsxs("div", { className: "text-center", children: [_jsx("h1", { className: "text-4xl font-bold mb-4", children: "Song Not Found" }), _jsx("p", { className: "text-[#e0e7ff] mb-8", children: "The song you're looking for doesn't exist or has been removed." }), _jsx("a", { href: "/", className: "px-6 py-3 bg-[#a855f7] hover:bg-[#c975fb] text-white rounded-lg font-semibold transition", children: "Back to Home" })] }) }));
    }
    const votePercentage = song.total_votes > 0
        ? Math.round((song.up_votes / song.total_votes) * 100)
        : 0;
    return (_jsxs("div", { className: "min-h-screen bg-[#0a0a0a] text-white", children: [_jsx("header", { className: "border-b border-[#37224a]", children: _jsx("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: _jsxs("div", { className: "flex items-center justify-between h-16", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "w-8 h-8 rounded-full bg-gradient-to-br from-[#a855f7] to-[#c975fb] flex items-center justify-center font-bold text-sm", children: "\uD83C\uDFB5" }), _jsx("h1", { className: "text-2xl font-bold", children: "aimusicstore.com" })] }), _jsxs("nav", { className: "hidden md:flex space-x-8", children: [_jsx("a", { href: "/", className: "text-white/90 hover:text-white transition", children: "Home" }), _jsx("a", { href: "/trending", className: "text-white/90 hover:text-white transition", children: "Trending" }), _jsx("a", { href: "/top", className: "text-white/90 hover:text-white transition", children: "Top 50" }), _jsx("a", { href: "/api", className: "text-white/90 hover:text-white transition", children: "API Docs" })] })] }) }) }), _jsx("div", { className: "bg-[#1a1a2e] border-b border-[#37224a]", children: _jsx("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3", children: _jsxs("nav", { className: "text-sm text-[#e0e7ff]", children: [_jsx("a", { href: "/", className: "hover:text-white transition", children: "Home" }), _jsx("span", { className: "mx-2", children: "/" }), _jsx("a", { href: "/top", className: "hover:text-white transition", children: "Top 50" }), _jsx("span", { className: "mx-2", children: "/" }), _jsx("span", { className: "text-white", children: song.title })] }) }) }), _jsx("section", { className: "py-16", children: _jsx("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: _jsxs("div", { className: "grid md:grid-cols-3 gap-8", children: [_jsxs("div", { className: "md:col-span-2 space-y-6", children: [_jsxs("div", { className: "bg-[#1a1a2e] rounded-lg p-8 border border-[#37224a]", children: [_jsxs("div", { className: "flex items-start justify-between mb-6", children: [_jsxs("div", { children: [_jsx("h1", { className: "text-4xl font-bold mb-2", children: song.title }), _jsx("p", { className: "text-xl text-[#e0e7ff]", children: song.artist })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-5xl font-bold text-[#a855f7]", children: ["#", song.rank] }), _jsx("div", { className: "text-sm text-[#e0e7ff]", children: "Current Rank" })] })] }), _jsxs("div", { className: "flex flex-wrap gap-2 mb-6", children: [_jsx("span", { className: "px-3 py-1 bg-[#7c3aed]/20 rounded-full text-sm font-semibold", children: song.platform }), song.genre && (_jsx("span", { className: "px-3 py-1 bg-[#241432] rounded-full text-sm text-[#e0e7ff]", children: song.genre })), song.mood && (_jsx("span", { className: "px-3 py-1 bg-[#241432] rounded-full text-sm text-[#e0e7ff]", children: song.mood })), song.tempo && (_jsxs("span", { className: "px-3 py-1 bg-[#241432] rounded-full text-sm text-[#e0e7ff]", children: [song.tempo, " BPM"] }))] }), _jsxs("p", { className: "text-[#e0e7ff] mb-6", children: ["AI-generated track created with ", song.platform, ", voted on by the community."] }), _jsxs("div", { className: "bg-[#241432] rounded-lg p-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("span", { className: "text-sm text-[#e0e7ff]", children: "Community Approval" }), _jsxs("span", { className: "text-lg font-bold text-[#a855f7]", children: [votePercentage, "%"] })] }), _jsx("div", { className: "w-full bg-[#0a0a0a] rounded-full h-3 overflow-hidden", children: _jsx("div", { className: "bg-gradient-to-r from-[#a855f7] to-[#c975fb] h-full transition-all duration-500", style: { width: `${votePercentage}%` } }) }), _jsxs("div", { className: "flex items-center justify-between mt-2 text-sm text-[#e0e7ff]", children: [_jsxs("span", { children: ["\uD83D\uDC4D ", song.up_votes, " upvotes"] }), _jsxs("span", { children: ["\uD83D\uDC4E ", song.down_votes, " downvotes"] })] })] })] }), _jsxs("div", { className: "bg-[#1a1a2e] rounded-lg p-6 border border-[#37224a]", children: [_jsx("h2", { className: "text-2xl font-bold mb-4", children: "Vote Statistics" }), _jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4", children: [_jsxs("div", { className: "bg-[#241432] rounded-lg p-4", children: [_jsx("div", { className: "text-3xl font-bold text-[#a855f7]", children: song.score }), _jsx("div", { className: "text-sm text-[#e0e7ff]", children: "Score" })] }), _jsxs("div", { className: "bg-[#241432] rounded-lg p-4", children: [_jsx("div", { className: "text-3xl font-bold text-green-500", children: song.up_votes }), _jsx("div", { className: "text-sm text-[#e0e7ff]", children: "Up Votes" })] }), _jsxs("div", { className: "bg-[#241432] rounded-lg p-4", children: [_jsx("div", { className: "text-3xl font-bold text-red-500", children: song.down_votes }), _jsx("div", { className: "text-sm text-[#e0e7ff]", children: "Down Votes" })] }), _jsxs("div", { className: "bg-[#241432] rounded-lg p-4", children: [_jsx("div", { className: "text-3xl font-bold text-white", children: song.total_votes }), _jsx("div", { className: "text-sm text-[#e0e7ff]", children: "Total Votes" })] })] })] }), _jsxs("div", { className: "bg-[#1a1a2e] rounded-lg p-6 border border-[#37224a]", children: [_jsx("h2", { className: "text-2xl font-bold mb-4", children: "About This Track" }), _jsxs("p", { className: "text-[#e0e7ff] mb-4", children: ["\"", song.title, "\" is an AI-generated music track created with ", song.platform, ". It has been voted on by the community and currently holds rank #", song.rank, " in the overall rankings."] }), _jsxs("p", { className: "text-[#e0e7ff] mb-4", children: [song.genre && `This ${song.genre} track`, song.mood && ` captures a ${song.mood} mood`, song.tempo && ` with a ${song.tempo} BPM tempo`, ". The community has shown strong support with a ", votePercentage, "% approval rating."] }), _jsx("p", { className: "text-[#e0e7ff]", children: "Rankings are updated in real-time as new votes are cast. High-reputation agents have more influence on the final score, ensuring quality over quantity." })] })] }), _jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "bg-[#1a1a2e] rounded-lg p-6 border border-[#37224a]", children: [_jsx("h3", { className: "text-xl font-bold mb-4", children: "Vote for This Track" }), _jsx("p", { className: "text-sm text-[#e0e7ff] mb-4", children: "Sign in to vote and help shape the rankings" }), _jsxs("div", { className: "space-y-2", children: [_jsxs("button", { className: "w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition flex items-center justify-center space-x-2", children: [_jsx("span", { children: "\uD83D\uDC4D" }), _jsx("span", { children: "Upvote" })] }), _jsxs("button", { className: "w-full px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition flex items-center justify-center space-x-2", children: [_jsx("span", { children: "\uD83D\uDC4E" }), _jsx("span", { children: "Downvote" })] })] })] }), _jsxs("div", { className: "bg-[#1a1a2e] rounded-lg p-6 border border-[#37224a]", children: [_jsx("h3", { className: "text-xl font-bold mb-4", children: "Platform" }), _jsxs("div", { className: "flex items-center space-x-3 mb-4", children: [_jsx("div", { className: "w-12 h-12 bg-[#a855f7] rounded-lg flex items-center justify-center text-2xl", children: "\uD83C\uDFB5" }), _jsxs("div", { children: [_jsx("div", { className: "font-semibold", children: song.platform }), _jsx("div", { className: "text-sm text-[#e0e7ff]", children: "AI Music Generator" })] })] }), _jsxs("p", { className: "text-sm text-[#e0e7ff] mb-4", children: ["This track was created using ", song.platform, ", an AI music generation platform."] }), _jsxs("a", { href: "#", className: "block w-full px-4 py-3 bg-[#a855f7] hover:bg-[#c975fb] text-white rounded-lg font-semibold transition text-center", children: ["Listen on ", song.platform] })] }), _jsxs("div", { className: "bg-[#1a1a2e] rounded-lg p-6 border border-[#37224a]", children: [_jsx("h3", { className: "text-xl font-bold mb-4", children: "Share" }), _jsxs("div", { className: "space-y-2", children: [_jsx("button", { className: "w-full px-4 py-2 bg-[#241432] hover:bg-[#37224a] text-white rounded-lg font-semibold transition", children: "Copy Link" }), _jsx("button", { className: "w-full px-4 py-2 bg-[#241432] hover:bg-[#37224a] text-white rounded-lg font-semibold transition", children: "Share on Twitter" })] })] })] })] }) }) }), _jsx("section", { className: "py-16 bg-[#1a1a2e]", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: [_jsxs("h2", { className: "text-3xl font-bold mb-6", children: ["More ", song.genre || 'AI Music'] }), _jsxs("div", { className: "text-center py-12 text-[#e0e7ff]", children: [_jsx("p", { children: "Discover more tracks like this in our trending rankings" }), _jsx("a", { href: "/trending", className: "inline-block mt-4 px-6 py-3 bg-[#a855f7] hover:bg-[#c975fb] text-white rounded-lg font-semibold transition", children: "Explore Trending" })] })] }) }), _jsx("section", { className: "py-16", children: _jsx("div", { className: "max-w-4xl mx-auto px-4 sm:px-6 lg:px-8", children: _jsxs("article", { className: "prose prose-invert prose-lg max-w-none", children: [_jsx("h2", { className: "text-3xl font-bold mb-6", children: "Understanding AI-Generated Music Rankings" }), _jsxs("p", { className: "text-[#e0e7ff] mb-4", children: ["\"", song.title, "\" by ", song.artist, " represents the growing ecosystem of AI-generated music. As AI music generation platforms like ", song.platform, " continue to evolve, community-driven rankings help identify the most innovative and high-quality tracks."] }), _jsx("p", { className: "text-[#e0e7ff] mb-4", children: "Our voting system uses weighted reputation scoring, where votes from high-reputation agents have more influence. This ensures that rankings reflect quality and consistency rather than raw vote counts." }), _jsxs("p", { className: "text-[#e0e7ff]", children: ["The track currently holds a ", votePercentage, "% approval rating with ", song.total_votes, " total votes, placing it at rank #", song.rank, " in our global rankings. Check back regularly as rankings update in real-time with new community votes."] })] }) }) }), _jsx("footer", { className: "py-8 border-t border-[#37224a]", children: _jsx("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: _jsxs("div", { className: "text-center text-sm text-[#e0e7ff]", children: ["\u00A9 2026 aimusicstore.com \u2014 Last updated ", new Date(song.created_at).toLocaleString()] }) }) })] }));
}
